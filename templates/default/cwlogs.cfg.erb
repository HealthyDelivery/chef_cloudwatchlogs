[general]
# Path to the AWSLogs agent's state file. Agent uses this file to maintain
# client side state across its executions.
state_file = /var/awslogs/state/agent-state

<% @logs.each do |hash| %>
[<%= hash[:name] %>]
datetime_format = [%Y-%m-%d %H:%M:%S]
log_group_name = <%= hash[:group] %>
file = <%= hash[:path] %>
log_stream_name = <%= node[:opsworks][:instance][:hostname] %>-<%= hash[:name] %>

<% end %>

[<%= node[:opsworks][:stack][:name] %>]
datetime_format = [%Y-%m-%d %H:%M:%S]
log_group_name = <%= node[:opsworks][:stack][:name].gsub(' ', '_') %>
file = <%= node[:cwlogs][:logfile] %>
log_stream_name = <%= node[:opsworks][:instance][:hostname] %>
